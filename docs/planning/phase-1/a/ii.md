---
status: complete
---

# Phase 1aii — Define target layout

## Focus

Specify the canonical target on-disk layout for `nunchuck` skill packages (including how skillsets group skills, where shared resources live, and how installation into a local project works).

## Inputs

- Output of `docs/planning/phase-1/a/i.md`
- Agent Skills spec reference: `docs/references/AGENT_SKILLS_SPEC.md`
- Tenets: `docs/KICKOFF.md`

## Work

1. Propose the package directory layout (top-level folders, expected files per skill, and where `.resources/` should live).
2. Specify how a “skill package” is identified and installed into a target project (e.g., destination paths, namespacing, and collision behavior).
3. Decide how skillsets should be packaged relative to member skills (same package vs separate) while preserving member independence.

## Output

## Proposed `nunchuck` model

`nunchuck` introduces a **pack** concept on top of the Agent Skills spec.

- A **skill** is unchanged: a directory containing `SKILL.md` (spec-compliant) and optional `references/`, `scripts/`, `assets/`.
- A **skillset** is unchanged: a spec-compliant skill directory with `metadata.skillset`.
- A **pack** is a deterministic container for one or more skills/skillsets plus shared resources and metadata for installation.

## Canonical pack layout (source + installed)

```text
<pack-root>/
├── nunchuck.toml                 # Pack metadata (name, version, authors, compatibility)
├── skills/                       # The only “skill root” scanned by adapters/CLI
│   ├── <skill-or-skillset>/
│   │   ├── SKILL.md
│   │   ├── references/           # optional
│   │   ├── scripts/              # optional
│   │   └── assets/               # optional (static; avoid markdown)
│   └── ...
├── .resources/                   # Shared resources for skillsets (optional)
│   ├── assets/
│   ├── scripts/
│   └── references/
└── README.md                     # Pack-level readme (optional)
```

Notes:

- The pack-level `.resources/` is for **shared** assets/scripts/references used by multiple skills in the pack.
- Skillset-level `.resources/` may still exist, but prefer pack-level `.resources/` when resources truly span multiple skills.

## Install layout in a consuming project

```text
<project-root>/
├── .nunchuck/
│   ├── packs/
│   │   └── <pack-name>/          # exact copy of pack-root (deterministic)
│   │       └── skills/...
│   └── state/
│       └── installs.json         # manifest mapping pack → source, version, file hashes
└── .windsurf/workflows/          # generated by adapter against installed pack(s)
```

Installation principle: **packs are isolated by directory**, not by merging all skills into one folder.

## How a pack is identified

- Pack identity is `nunchuck.toml` + `pack.name` + `pack.version`.
- A directory without `nunchuck.toml` is not a pack.
- The canonical “skill root” for a pack is always `<pack-root>/skills/`.

## Collision / namespacing policy

- Skill names are globally unique **within a pack**.
- If multiple packs are installed, collisions are allowed because packs are isolated.
- Adapter generation targets one or more pack skill roots explicitly (CLI can generate workflows per pack).

## Reconciling current repo drift (decisions)

- **Index naming**: standardize on `.INDEX.md` for agent consumption (per repo conventions). Update generators and docs to consistently write/read `skills/.INDEX.md`.
- **Repo root INDEX**: if a top-level index is desired, make it a generated `.INDEX.md` (not `INDEX.md`) to align with conventions and avoid the current dangling README link.
- **Adapter/index as first-class skills**: create actual `skills/adapter/` and `skills/index/` skills (spec-compliant) so that docs and the skill index reflect them as skills, not “just scripts”. Keep deterministic scripts under those skills’ `scripts/` (or reference `scripts/` at repo root if we decide to keep a mono-repo script toolbox).
- **Repo-root `.resources/`**: avoid introducing a global `.resources/` at repo root as a long-term convention; prefer pack-level `.resources/` under `<pack-root>/`.

## Handoff

Proceed to **Phase 1aiii — Define validation rules**.

Use the target layout above to define what `nunchuck validate` checks for:

- Pack correctness (`nunchuck.toml`, `skills/` exists)
- Skill/spec compliance (`SKILL.md` rules)
- Resource/reference integrity (referenced files exist, no cross-pack coupling)
- Determinism/idempotence constraints for install/uninstall
