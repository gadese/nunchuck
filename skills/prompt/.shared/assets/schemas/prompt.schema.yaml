# Prompt Artifact Schema
# Canonical path: .prompt/active.yaml

type: object
required:
  - version
  - status
  - created_at
  - updated_at
  - intent

properties:
  version:
    type: string
    const: "1"
    description: Schema version

  status:
    type: string
    enum: [drafting, ready]
    description: Current artifact state

  created_at:
    type: string
    format: date-time
    description: RFC3339 UTC timestamp of creation

  updated_at:
    type: string
    format: date-time
    description: RFC3339 UTC timestamp of last update

  intent:
    type: object
    required: [objective]
    properties:
      objective:
        type: string
        description: Core objective (what to accomplish)
      constraints:
        type: array
        items:
          type: string
        description: Must/must-not requirements
      assumptions:
        type: array
        items:
          type: string
        description: Implicit context being assumed
      open_questions:
        type: array
        items:
          type: string
        description: Unresolved ambiguities

  prompt:
    type: string
    description: The final prompt text (populated when status=ready)

  quality:
    type: object
    properties:
      grade:
        type: string
        enum: [A, B, C, D]
      reasons:
        type: array
        items:
          type: string
      top_fix:
        type: string
